{"version":3,"file":"main-Dz0PA39s.js","sources":["../../src/main.js"],"sourcesContent":["/**\n * ORPHIQ LANE — OFFICIAL PLATFORM SCRIPT (2025)\n * Технологический стек: Three.js, GSAP, Lenis, Lucide.\n */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n  // --- 1. ИНИЦИАЛИЗАЦИЯ ИКОНОК (LUCIDE) ---\n  // Выполняем в первую очередь, чтобы элементы имели корректные размеры до расчетов GSAP\n  if (typeof lucide !== 'undefined') {\n      lucide.createIcons();\n  }\n\n  // --- 2. ПЛАВНЫЙ СКРОЛЛ (LENIS) ---\n  const lenis = new Lenis({\n      duration: 1.2,\n      easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n      smoothWheel: true\n  });\n\n  function raf(time) {\n      lenis.raf(time);\n      requestAnimationFrame(raf);\n  }\n  requestAnimationFrame(raf);\n\n  // --- 3. ИНТЕРАКТИВНАЯ 3D СФЕРА (THREE.JS) ---\n  const initHero3D = () => {\n      const container = document.getElementById('hero-canvas');\n      if (!container) return;\n\n      const scene = new THREE.Scene();\n      const camera = new THREE.PerspectiveCamera(75, container.offsetWidth / container.offsetHeight, 0.1, 1000);\n      const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });\n\n      renderer.setSize(container.offsetWidth, container.offsetHeight);\n      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n      container.appendChild(renderer.domElement);\n\n      // Геометрия: сфера из точек (Cloud of Innovation)\n      const geometry = new THREE.IcosahedronGeometry(2.2, 3);\n      const material = new THREE.PointsMaterial({\n          color: 0xFF7675, // Коралловый акцент\n          size: 0.045,\n          transparent: true,\n          opacity: 0.8\n      });\n\n      const points = new THREE.Points(geometry, material);\n      scene.add(points);\n      camera.position.z = 5;\n\n      // Интерактив за мышью\n      let mouseX = 0, mouseY = 0;\n      window.addEventListener('mousemove', (e) => {\n          mouseX = (e.clientX / window.innerWidth) - 0.5;\n          mouseY = (e.clientY / window.innerHeight) - 0.5;\n      });\n\n      const animate = () => {\n          requestAnimationFrame(animate);\n          // Базовое вращение\n          points.rotation.y += 0.0015;\n          points.rotation.x += 0.0008;\n          // Движение за курсором (сглаженное)\n          points.rotation.y += (mouseX * 0.4 - points.rotation.y) * 0.05;\n          points.rotation.x += (mouseY * 0.4 - points.rotation.x) * 0.05;\n          renderer.render(scene, camera);\n      };\n      animate();\n\n      window.addEventListener('resize', () => {\n          camera.aspect = container.offsetWidth / container.offsetHeight;\n          camera.updateProjectionMatrix();\n          renderer.setSize(container.offsetWidth, container.offsetHeight);\n      });\n  };\n  initHero3D();\n\n  // --- 4. МОБИЛЬНОЕ МЕНЮ (BURGER) ---\n  const burger = document.getElementById('burgerBtn');\n  const mobileMenu = document.querySelector('.mobile-menu');\n  const mobileLinks = document.querySelectorAll('.mobile-link');\n\n  if (burger && mobileMenu) {\n      burger.onclick = () => {\n          burger.classList.toggle('active');\n          mobileMenu.classList.toggle('active');\n          document.body.style.overflow = mobileMenu.classList.contains('active') ? 'hidden' : '';\n      };\n\n      mobileLinks.forEach(link => {\n          link.onclick = () => {\n              burger.classList.remove('active');\n              mobileMenu.classList.remove('active');\n              document.body.style.overflow = '';\n          };\n      });\n  }\n\n  // --- 5. ВАЛИДАЦИЯ ФОРМЫ, КАПЧА И ТЕЛЕФОН ---\n  const phoneInput = document.getElementById('phoneInput');\n  if (phoneInput) {\n      phoneInput.addEventListener('input', (e) => {\n          // Разрешаем только цифры и знак +\n          e.target.value = e.target.value.replace(/[^0-9+]/g, '');\n      });\n  }\n\n  const captchaLabel = document.getElementById('captchaQuestion');\n  const captchaInput = document.getElementById('captchaAnswer');\n  let captchaResult = 0;\n\n  const generateCaptcha = () => {\n      if (!captchaLabel) return;\n      const n1 = Math.floor(Math.random() * 10) + 1;\n      const n2 = Math.floor(Math.random() * 7) + 1;\n      captchaResult = n1 + n2;\n      captchaLabel.innerText = `${n1} + ${n2} = `;\n  };\n  generateCaptcha();\n\n  const form = document.getElementById('mainForm');\n  if (form) {\n      form.addEventListener('submit', (e) => {\n          e.preventDefault();\n          if (parseInt(captchaInput.value) !== captchaResult) {\n              alert('Пожалуйста, решите математический пример корректно.');\n              generateCaptcha();\n              captchaInput.value = '';\n              return;\n          }\n\n          const btn = form.querySelector('button');\n          const originalText = btn.innerText;\n          btn.innerText = 'Отправка...';\n          btn.disabled = true;\n\n          // Имитация AJAX\n          setTimeout(() => {\n              form.reset();\n              document.getElementById('formSuccess').style.display = 'block';\n              btn.innerText = originalText;\n              btn.disabled = false;\n              generateCaptcha();\n              // Скрываем успех через 5 сек\n              setTimeout(() => {\n                  document.getElementById('formSuccess').style.display = 'none';\n              }, 5000);\n          }, 1500);\n      });\n  }\n\n  // --- 6. GSAP SCROLL ANIMATIONS (С фиксом для списков) ---\n  if (typeof gsap !== 'undefined') {\n      gsap.registerPlugin(ScrollTrigger);\n\n      // Анимация Hero секции\n      const heroTimeline = gsap.timeline();\n      heroTimeline.from(\".hero__content > *\", {\n          y: 40,\n          opacity: 0,\n          duration: 1,\n          stagger: 0.15,\n          ease: \"power3.out\",\n          delay: 0.2\n      });\n\n      // Универсальный Reveal для всех секций (About, Features, Blog и т.д.)\n      const sections = gsap.utils.toArray('section');\n      sections.forEach(section => {\n          // Ищем элементы внутри секции, включая списки li\n          const animTargets = section.querySelectorAll(\n              '.section-title, .section-subtitle, .about__card, .about__list li, .inno-item, .blog-card, .features__list li'\n          );\n\n          if (animTargets.length > 0) {\n              gsap.from(animTargets, {\n                  scrollTrigger: {\n                      trigger: section,\n                      start: \"top 85%\",\n                      toggleActions: \"play none none none\"\n                  },\n                  y: 30,\n                  opacity: 0,\n                  duration: 0.8,\n                  stagger: 0.1,\n                  ease: \"power2.out\",\n                  clearProps: \"all\" // Очищаем стили после завершения для корректного Hover\n              });\n          }\n      });\n\n      // Принудительное обновление для корректных координат после загрузки Three.js\n      window.addEventListener('load', () => {\n          ScrollTrigger.refresh();\n      });\n  }\n\n  // --- 7. COOKIE POPUP ---\n  const cookiePopup = document.getElementById('cookiePopup');\n  if (cookiePopup && !localStorage.getItem('orphiq_cookies')) {\n      setTimeout(() => {\n          cookiePopup.style.display = 'flex';\n      }, 3000);\n\n      document.getElementById('acceptCookies').onclick = () => {\n          localStorage.setItem('orphiq_cookies', 'true');\n          cookiePopup.style.display = 'none';\n      };\n  }\n\n  // --- 8. HEADER SCROLL EFFECT ---\n  const header = document.querySelector('.header');\n  window.addEventListener('scroll', () => {\n      if (window.scrollY > 50) {\n          header.classList.add('header--scrolled');\n      } else {\n          header.classList.remove('header--scrolled');\n      }\n  });\n});"],"names":["lenis","t","raf","time","container","scene","camera","renderer","geometry","material","points","mouseX","mouseY","e","animate","burger","mobileMenu","mobileLinks","link","phoneInput","captchaLabel","captchaInput","captchaResult","generateCaptcha","n1","n2","form","btn","originalText","section","animTargets","cookiePopup","header"],"mappings":"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"}